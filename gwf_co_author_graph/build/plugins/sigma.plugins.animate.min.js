!function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var r=0,e={};function d(a){if(e[a])return e[a];var n=[0,0,0];return a.match(/^#/)?n=3===(a=(a||"").replace(/^#/,"")).length?[parseInt(a.charAt(0)+a.charAt(0),16),parseInt(a.charAt(1)+a.charAt(1),16),parseInt(a.charAt(2)+a.charAt(2),16)]:[parseInt(a.charAt(0)+a.charAt(1),16),parseInt(a.charAt(2)+a.charAt(3),16),parseInt(a.charAt(4)+a.charAt(5),16)]:a.match(/^ *rgba? *\(/)&&(n=[+(a=a.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/))[1],+a[2],+a[3]]),e[a]={r:n[0],g:n[1],b:n[2]},e[a]}sigma.plugins.animate=function(e,s,a){var n,i=a||{},t=++r,o=i.duration||e.settings("animationsTime"),c="string"==typeof i.easing?sigma.utils.easings[i.easing]:"function"==typeof i.easing?i.easing:sigma.utils.easings.quadraticInOut,g=sigma.utils.dateNow(),m=i.nodes&&i.nodes.length?"object"==typeof i.nodes[0]?i.nodes:e.graph.nodes(i.nodes):e.graph.nodes(),u=m.reduce(function(a,n){for(var e in a[n.id]={},s)e in n&&(a[n.id][e]=n[e]);return a},{});for(n in e.animations=e.animations||Object.create({}),sigma.plugins.kill(e),e.cameras)e.cameras[n].edgequadtree._enabled=!1;!function a(){var n,r=(sigma.utils.dateNow()-g)/o;if(1<=r){for(n in m.forEach(function(a){for(var n in s)n in s&&(a[n]=a[s[n]])}),e.cameras)e.cameras[n].edgequadtree._enabled=!0;e.refresh(),"function"==typeof i.onComplete&&i.onComplete()}else r=c(r),m.forEach(function(a){for(var n in s)n in s&&(n.match(/color$/)?a[n]=(e=u[a.id][n],i=a[s[n]],t=r,e=d(e),i=d(i),"rgb("+[0|e.r*(1-t)+i.r*t,0|e.g*(1-t)+i.g*t,0|e.b*(1-t)+i.b*t].join(",")+")"):a[n]=a[s[n]]*r+u[a.id][n]*(1-r));var e,i,t}),e.refresh(),e.animations[t]=requestAnimationFrame(a)}()},sigma.plugins.kill=function(a){for(var n in a.animations||{})cancelAnimationFrame(a.animations[n]);for(n in a.cameras)a.cameras[n].edgequadtree._enabled=!0}}.call(window);